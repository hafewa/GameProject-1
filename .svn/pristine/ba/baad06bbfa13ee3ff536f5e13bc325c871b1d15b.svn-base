using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using UniLua;
using UnityEngine;

class LuaMsgBoxLib
{
    static LuaClassRegHelper m_ClassRegHelper = new LuaClassRegHelper();  

    public const string LIB_NAME = "MsgBox";

    public static int OpenLib(ILuaState lua)
    {

        //注册成员函数
        NameFuncPair[] member_define = new NameFuncPair[]
        {
            
            
        };

        NameFuncPair[] operator_define = new NameFuncPair[]
        {
           
        };

        m_ClassRegHelper.RegMembers(lua, member_define, operator_define);


        //注册静态成员
        NameFuncPair[] static_define = new NameFuncPair[]
        {
            new NameFuncPair("Show",S_Show),
            new NameFuncPair("SetTitle",S_SetTitle),
            
        };
        m_ClassRegHelper.RegStatics(lua, static_define);

        return 1;
    }
    static int S_SetTitle(ILuaState lua)
    {
        string str = lua.L_CheckString(1);
        wnd_MsgBox.Single.SetTitle(str);
        return 0;
    }
    static int S_Show(ILuaState lua)
    {
        //in msg,btn1_text,btn2_text,class,func
        //out void
        string msg = lua.L_CheckString(1);
        string btn1_text = lua.L_CheckString(2);
        string btn2_text = lua.L_CheckString(3);
        
        lua.L_ArgCheck(lua.IsTable(4),4,"必须是表");
        lua.L_ArgCheck(lua.IsFunction(5),5,"必须是函数");

        QKEvent evt = LuaRoot.LDelegate2Event<LuaEventCallback>(lua, 4, 5);
        {
            wnd_MsgBox.Single.ShowMsgBox(msg, btn1_text, btn2_text, (r) => { using(evt) evt.Call(r); });
        }

        
        return 0;
    }
     
}
 
